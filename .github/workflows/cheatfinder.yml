name: Cheat finder

on:
  workflow_dispatch:
    inputs:
      start:
        type: string
        required: true
      end:
        type: string
        required: true
      alphabet: 
        type: string
        default: "ABCDEFGHIJKLMNOPQRSTUVWXYZ"

jobs:
  main:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@main
    - uses: oven-sh/setup-bun@main
    - name: Prepare data
      run: |
        bun gtasacchcf.js -s ${{ inputs.start }} -e ${{ inputs.end }} -a ${{ inputs.alphabet }}
        bun tsv.js
    - name: Git changes
      run: |
        # git config user.name "github-actions[bot]"
        # git config user.email "github-actions[bot]@users.noreply.github.com"
        git commit --author="github-actions[bot] <github-actions[bot]@users.noreply.github.com>" -a -m "[action] Cheat finder"
        gh pr create --head --fill
